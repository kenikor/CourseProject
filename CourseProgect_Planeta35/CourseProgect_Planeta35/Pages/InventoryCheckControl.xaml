<UserControl x:Class="CourseProgect_Planeta35.Controls.InventoryCheckControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Height="Auto" Width="Auto">

    <Grid Background="#F5F1E9">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <StackPanel Margin="25 20 0 10">
            <TextBlock Text="Инвентаризация" 
                       FontSize="28" 
                       FontWeight="Bold" 
                       Foreground="#2A2A2A"/>

            <TextBlock Text="Проверьте наличие и состояние объектов учёта" 
                       FontSize="14"
                       Foreground="#8B9B4C"
                       Margin="0 4 0 0"/>
        </StackPanel>

        <!-- Прогресс -->
        <StackPanel Orientation="Vertical"
            HorizontalAlignment="Right"
            Margin="0 10 25 10">

            <!-- Проценты -->
            <TextBlock x:Name="ProgressPercentText"
               Text="0%"
               FontSize="20"
               FontWeight="Bold"
               Foreground="#2A2A2A"
               HorizontalAlignment="Right"/>

            <TextBlock Text="Завершено"
               FontSize="12"
               Foreground="#4A6371"
               HorizontalAlignment="Right"
               Margin="0 -4 0 6"/>

            <!-- Прогресс-бар -->
            <Border Width="140" Height="6" CornerRadius="3" Background="#E4EFE5">
                <Border x:Name="ProgressBarFill"
                Background="#52A66A"
                CornerRadius="3"
                Width="0"/>
            </Border>

        </StackPanel>

        <!-- Контент -->
        <Border Grid.Row="2"
                Margin="25"
                Padding="20"
                Background="White"
                CornerRadius="12">
            <DockPanel>

                <!-- Поиск -->
                <StackPanel DockPanel.Dock="Top">
                    <Border Background="#F4F7F4"
                            Height="40"
                            CornerRadius="10"
                            Padding="10"
                            Margin="0 0 0 15">
                        <DockPanel>
                            <TextBox x:Name="SearchBox"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     Foreground="#333"
                                     FontSize="14"
                                     TextChanged="SearchBox_TextChanged"
                                     VerticalContentAlignment="Center"
                                     />
                        </DockPanel>
                    </Border>

                    <TextBlock x:Name="FoundCountText"
                               Text="Найдено объектов: 0"
                               Foreground="#3A3A3A"
                               FontSize="14"
                               Margin="5 0 0 10"/>
                </StackPanel>

                <!-- Список элементов -->
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="ItemsList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Background="Transparent"
                                        BorderThickness="0"
                                        Padding="0"
                                        Cursor="Hand"
                                        Click="Item_Click">

                                    <Border Margin="0 5"
                                            Width="600"
                                            Padding="12"
                                            Background="#FBFBFB"
                                            CornerRadius="10"
                                            BorderBrush="#e2e2e2"
                                            BorderThickness="1">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Картинка -->
                                            <Image Source="{Binding Asset.ImagePath}"
                                                   Width="60"
                                                   Height="60"
                                                   Stretch="UniformToFill"
                                                   Margin="5"
                                                   ClipToBounds="True"/>

                                            <!-- Текст -->
                                            <StackPanel Grid.Column="1" Margin="10 0">
                                                <TextBlock Text="{Binding Asset.Name}"
                                                           FontSize="15"
                                                           FontWeight="Bold"/>

                                                <StackPanel Orientation="Horizontal" Margin="0 6 0 0">
                                                    <Ellipse Width="8" Height="8"
                                                             Fill="#52A66A"
                                                             VerticalAlignment="Center"
                                                             Margin="0 0 6 0"/>
                                                    <TextBlock Text="{Binding Asset.Category.Name}"
                                                               FontSize="12"
                                                               Foreground="#4F6F59"/>
                                                </StackPanel>

                                                <TextBlock Text="{Binding Asset.SerialNumber, StringFormat=SN: {0}}"
                                                           FontSize="12"
                                                           Foreground="#777"
                                                           Margin="0 4 0 0"/>
                                            </StackPanel>

                                            <!-- Чекбокс проверки -->
                                            <StackPanel Grid.Column="2" VerticalAlignment="Center" Orientation="Horizontal" Margin="0 0 8 0">
                                                <CheckBox IsChecked="{Binding Asset.IsChecked, Mode=TwoWay}"
                                                          Checked="CheckBox_CheckedUnchecked"
                                                          Unchecked="CheckBox_CheckedUnchecked"
                                                          VerticalAlignment="Center"
                                                          Margin="0 0 8 0"/>
                                                <TextBlock Text="Проверено" VerticalAlignment="Center" Foreground="#444"/>
                                            </StackPanel>
                                        </Grid>
                                    
                                    </Border>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

            </DockPanel>
        </Border>
    </Grid>

</UserControl>
